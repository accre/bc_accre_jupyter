# Batch Connect app configuration file
#
---

cluster: "accre"

attributes:
  # TODO: Check and remove this line below
  modules: "Anaconda3"

  # Any extra command line arguments to feed to the `jupyter notebook ...`
  # command that launches the Jupyter notebook within the batch job
  extra_jupyter_args: ""
  bc_account: null
  bc_queue: null
  bc_num_slots: null
  bc_num_hours:
    value: 48
  bc_mem:
    label: "Maximum Memory (GB)"
    value: 4
  bc_num_cores:
    label: "Number of CPU Cores"
    value: 1
  cpuarch:
    widget: select
    label: "CPU Architecture"
    help: "Defaults to the first available node with any architecture"
    options:
      - [ "Any", "any" ]
      - [ "Skylake", "skylake" ]
      - [ "Haswell", "haswell" ]
      - [ "Sandy Bridge", "sandybridge" ]
      - [ "Westmere", "westmere" ]
  notebook_dir:
    label: "Working Directory" 
    help: "Directory containing your notebook files. Defaults to your home directory, you must include the absolute path to the directory."
    widget: "text_field"
    value: "${HOME}"
  version:
    widget: select
    label: "Python, R, and/or Octave version for a pre-selected environment"
    help: |
      Select the version of Python and possibly Octave or R that you want to load based
      on either an ACCRE GCC or Intel compiler toolchain or an installed Anaconda
      distribution.
    options:
      - [ "Python/3.6.3 + Octave/4.2.2 (GCC)", "GCC/6.4.0-2.28/Python3"]
      - [ "Python/2.7.14 + R/3.6.3 + Octave/4.2.2 (GCC)", "GCC/6.4.0-2.28/Python2"]
      - [ "Python/3.6.3 + Octave/4.2.2 (Intel)", "Intel/2017.4.196/Python3"]
      - [ "Python/2.7.14 + R/3.6.3 + Octave/4.2.2 (Intel)", "Intel/2017.4.196/Python2"]
      - [ "Python 3.6.3 / Anaconda 5.0.1", "Anaconda3/5.0.1"]
      - [ "Python 3.6.1 / Anaconda 4.4.0", "Anaconda3/4.4.0"]
      - [ "Python 2.7.14 / Anaconda 5.0.1", "Anaconda2/5.0.1"]
      - [ "Python 2.7.13 / Anaconda 4.4.0", "Anaconda2/4.4.0"]
  use_venv:
    widget: check_box
    checked_value: 1
    unchecked_value: 0
    label: "Use a Customized Environment"
    help: |
      Check this box if you wish to load a customized environment.
      Note that you must have jupyter available based on the Lmod modules
      and/or virtual environment that you choose to load.
  custom_mods:
    widget: "text_field"
    label: "Lmod Module Collection"
    help: |
      Leave blank unless using a customized environment. If using a customized
      environment, you must save the modules you want to use in a
      [module collection]: https://www.vanderbilt.edu/accre/documentation/lmod-guide/#modules-collections
      and specify the module collection name here.
    value: ""
  venv:
    widget: "text_field"
    label: "Python or Conda Virtual Environment"
    help: |
      Leave blank unless using a python or conda virtual environment. For
      a python virtual environment, you must specify the absolute path.
      Your virtual environment should have been created with the same
      set of modules as the module collection specified above.
    value: ""
  use_cgw:
    widget: check_box
    checked_value: 1
    unchecked_value: 0
    label: "Use a Custom Gateway Node"
    help: |
      Check this box if you wish to run your job on a custom gateway
      node instead of a standard compute node. You must be a member of
      a group that has an OnDemand enabled custom gateway to use this
      feature. If you wish to have OnDemand enabled on your group's
      custom gateway, please open a helpdesk ticket. If this box is
      checked, then you must enter the name of your custom gateway
      below. 
  cgw:
    label: "Custom Gateway Node"
    value: "N/A"
    help: "Leave blank unless using a custom gateway node"

form:
  - modules
  - extra_jupyter_args
  - bc_account
  - bc_queue
  - bc_num_hours
  - bc_mem
  - bc_num_cores
  - bc_num_slots
  - cpuarch
  - notebook_dir
  - version
  - use_venv
  - custom_mods
  - venv
  - use_cgw
  - cgw
